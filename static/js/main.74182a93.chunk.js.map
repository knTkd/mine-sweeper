{"version":3,"sources":["index.js"],"names":["Square","props","className","onClick","value","Board","i","this","squares","renderSquare","React","Component","encode","Math","floor","Game","bombs","Array","fill","random","h","w","noBombCount","en","r","c","cnt","ri","ci","state","berried","turnCount","status","slice","String","alert","setState","handleSquare","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.74182a93.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\n\nfunction Square(props) {\n  return (\n      <button className=\"square\" onClick={props.onClick}>\n      {props.value}\n      </button>\n  );\n}\n\n\nclass Board extends React.Component {\n\n  renderSquare(i) {\n    return (\n\t<Square\n      value={this.props.squares[i]}\n      onClick={() => this.props.onClick(i)}\n\t/>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"board-row\">\n        {this.renderSquare(0)}\n        {this.renderSquare(1)}\n        {this.renderSquare(2)}\n        {this.renderSquare(3)}\n        {this.renderSquare(4)}\n        {this.renderSquare(5)}\n        {this.renderSquare(6)}\n        </div>\n        <div className=\"board-row\">\n        {this.renderSquare(7)}\n        {this.renderSquare(8)}\n        {this.renderSquare(9)}\n        {this.renderSquare(10)}\n        {this.renderSquare(11)}\n        {this.renderSquare(12)}\n        {this.renderSquare(13)}\n        </div>\n        <div className=\"board-row\">\n        {this.renderSquare(14)}\n        {this.renderSquare(15)}\n        {this.renderSquare(16)}\n        {this.renderSquare(17)}\n        {this.renderSquare(18)}\n        {this.renderSquare(19)}\n        {this.renderSquare(20)}\n        </div>\n        <div className=\"board-row\">\n        {this.renderSquare(21)}\n        {this.renderSquare(22)}\n        {this.renderSquare(23)}\n        {this.renderSquare(24)}\n        {this.renderSquare(25)}\n        {this.renderSquare(26)}\n        {this.renderSquare(27)}\n        </div>\n        <div className=\"board-row\">\n        {this.renderSquare(28)}\n        {this.renderSquare(29)}\n        {this.renderSquare(30)}\n        {this.renderSquare(31)}\n        {this.renderSquare(32)}\n        {this.renderSquare(33)}\n        {this.renderSquare(34)}\n        </div>\n        <div className=\"board-row\">\n        {this.renderSquare(35)}\n        {this.renderSquare(36)}\n        {this.renderSquare(37)}\n        {this.renderSquare(38)}\n        {this.renderSquare(39)}\n        {this.renderSquare(40)}\n        {this.renderSquare(41)}\n        </div>\n        <div className=\"board-row\">\n        {this.renderSquare(42)}\n        {this.renderSquare(43)}\n        {this.renderSquare(44)}\n        {this.renderSquare(45)}\n        {this.renderSquare(46)}\n        {this.renderSquare(47)}\n        {this.renderSquare(48)}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction encode(i) {\n  return [Math.floor(i / 7) + 1, i % 7 + 1];\n}\n\nfunction decode(h, w) {\n  return (h - 1) * 7 + w - 1;\n}\n  \n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let bombs = Array(49).fill(0);  // 爆弾なら1, 違うなら周りの爆弾の数*(-1)\n    for (let i = 0; i < Math.floor(49 * 1 / 3); i++)\n      bombs[Math.floor(Math.random() * 49)] = 1;\n\n    let noBombCount = 0;\n\n    for (let i = 0; i < 49; i++) {\n      if (bombs[i] == 1)  continue;\n      noBombCount += 1;\n      let en = encode(i);\n      let r = en[0], c = en[1];\n      let cnt = 0;\n      for (let ri = -1; ri <= 1; ri++)\n\tfor (let ci = -1; ci <= 1; ci++) {\n\t  if (ri == 0 && ci == 0)  continue;\n\t  if (1 > r + ri || r + ri > 7)  continue;\n\t  if (1 > c + ci || c + ci > 7)  continue;\n\t  if (bombs[decode(r + ri, c + ci)] == 1)\n\t    cnt++;\n\t}\n      bombs[i] = -cnt;\n    }\n\n    this.state = {\n      squares: Array(49).fill(null),\n      berried: Array(49).fill(false),\n      bombs: bombs,\n      turnCount: 0,\n      noBombCount: noBombCount,\n      status: 'Hello, world!',\n    };\n  }\n\n  handleSquare(i) {\n    let en = encode(i);\n\n    let al = 'row = ' + en[0] + '  col = ' + en[1];\n    //alert(al);  // 何列・何行をクリックしたかを表示 デバッグ用\n\n    if (this.state.berried[i])  return;  // もうそこを掘ってたら帰る\n    if (i < 0 || 49 <= i)  return;  // マス外が来たら まず無いけど一応\n    if (this.state.bombs[i] == 1) {\n      // Game Over\n      alert('Game Over!');\n      return;\n    }\n    \n    let squares = this.state.squares.slice();\n    let berried = this.state.berried.slice();\n    let noBombCount = this.state.noBombCount;\n\n    berried[i] = true;\n    squares[i] = String(this.state.bombs[i] * -1);  // 表示用 周りの爆弾の数\n\n    if (--noBombCount <= 0) {\n      // Game Clear\n      alert('Game Clear!  Conguraturation!!');\n    }\n\n    this.setState({\n      squares: squares,\n      berried: berried,\n      noBombCount: noBombCount,\n    });\n  }\n\n  render() {\n    const status = this.state.status;\n    const squares = this.state.squares;\n    return (\n\t<div className=\"game\">\n\n\t<div className=\"game-board\">\n\t<Board\n      squares={squares}\n      onClick={(i) => this.handleSquare(i)}\n\t/>\n\t</div>\n\n\t<div className=\"game-info\">\n\t<div>{status}</div>\n\t</div>\n\t\n\t</div>\n    );\n  }\n}\n\n\nReactDOM.render(\n    <Game />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}